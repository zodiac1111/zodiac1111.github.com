<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Linux | 喜乐]]></title>
  <link href="http://zodiac1111.github.com/blog/categories/linux/atom.xml" rel="self"/>
  <link href="http://zodiac1111.github.com/"/>
  <updated>2012-09-30T15:07:28+08:00</updated>
  <id>http://zodiac1111.github.com/</id>
  <author>
    <name><![CDATA[zodiac1111]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Linux/Fedora 17下安装配置NFS服务]]></title>
    <link href="http://zodiac1111.github.com/blog/2012/09/17/linux-fedora-17-install-nfs-server/"/>
    <updated>2012-09-17T21:23:00+08:00</updated>
    <id>http://zodiac1111.github.com/blog/2012/09/17/linux-fedora-17-install-nfs-server</id>
    <content type="html"><![CDATA[<h1>NFS服务器安装和配置</h1>

<p>OS:fedora17.i686 &amp; fedora17.x86_64 &amp; f17beta.i686 &amp; f17beta.x86-64 <br/>
现在已经改成不用 imapXXXX的了
改成 守护进程rpc.nfsd
安装守护进程程序:</p>

<ol>
<li>搜索:<code>yum search nfs</code></li>
<li>得到:<code>nfs-utils.i686 : NFS utilities and supporting clients and daemons for the kernel NFS server</code><br/>
 看描述就是这货了.</li>
<li>安装:<code>yum install nfs-utils</code></li>
<li>使用:
<code>
 rpc.nfsd [数量]       #设置最大线程
 man 8 rpc.nfsd      #查看 帮助
</code></li>
</ol>


<!-- more -->


<h2>配置可用NFS服务器的目录</h2>

<p>使用您喜欢的文本编辑器编辑<code>/etc/exports</code>文件
例如:<code>vi /etc/exports</code>
```</p>

<pre><code>/mnt            127.0.0.1(ro,sync)
共享目录            主机名   (权限)
</code></pre>

<p>```
其中:</p>

<ul>
<li>共享目录  服务器共享的目录</li>
<li>主机名 指示能够访问这个共享目录的主机</li>
<li>权限    指示主机访问该共享目录的权限

<ol>
<li>ro=readonly只读 rw=读写</li>
<li>sync是设置NFS服务器同步写磁盘，不会导致数据的丢失

<h2>关闭防火墙(如果你和我一样不太了解如何配置防火墙的话)</h2></li>
</ol>
</li>
</ul>


<h2>启用新的配置</h2>

<p><code>exportfs</code> 指令主要的三个作用：<br/>
1. <code>exportfs -rv</code>   重新读取共享配置文件，马上生效 <br/>
2. <code>exportfs -auv</code>  马上停止所有本机上的NFS共享，并不改变 /etc/exports 文件的内容，只是当前停止共享<br/>
3. <code>exportfs -av</code>   显示所有当前机器上的NFS共享目录信息</p>

<h2>测试</h2>

<h3>启用挂载</h3>

<p>启动服务:</p>

<p><code>systemctl restart nfs-server.service</code></p>

<p>In older versions of Fedora (for instance Fedora 14),</p>

<p><code>su -c 'service nfs restart'</code></p>

<p>或?且</p>

<pre><code>rpc.mountd  
</code></pre>

<p>否则在下一步挂载可能出现:<br/>
mount.nfs: access denied by server while mounting 127.0.0.1:/home<br/>
或者在输入"mount -t nfs 127.0.0.1:"后按Tab键补全<br/>
:rpc mount export: RPC: Unable to receive; errno = Connection refused</p>

<h3>挂载</h3>

<p></del>貌似只能挂载 /home 这样的一级目录 像/home/tom 这样的目录就不行??</del><br/>
像/home/tom/doc/nfsroot 这样的目录必须保证这条路径<strong>所有文件夹</strong>都是有相应的权限的.<br/>
<code>chmod -R</code>或许会用得着 <br/>
即/home 得有(读写)权限 /home/tom 也一样 /home/tom/doc 也一样. 仅仅nfsroot文件夹有读写权限是不行的. <br/>
在挂在时还是会提示没有访问权限.....</p>

<pre><code>mount -t nfs 127.0.0.1:/home    /mnt
挂载 -t 类型 把远端/home    (挂在)   到/mnt
#将127.0.0.1:/home 挂载到本机的/mnt目录下
</code></pre>

<h3>卸载</h3>

<pre><code>unomt /mnt
</code></pre>

<h1>参考</h1>

<p>=====<br/>
1. <a href="http://fedoraproject.org/wiki/Administration_Guide_Draft/NFS">Fedora官方帮助文档</a><br/>
2. 查看错误日志<code>cat /var/log/messages | grep mount</code> 来自<a href="http://liuzhigong.blog.163.com/blog/static/17827237520115305226932/">这里</a><br/>
3. 图形化的配置工具 <code>yum install system-config-nfs.noarch</code></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Fedora 17 x86_64安装配置TFTP服务器]]></title>
    <link href="http://zodiac1111.github.com/blog/2012/07/03/Fedora-17-x86_64-tftp/"/>
    <updated>2012-07-03T10:58:00+08:00</updated>
    <id>http://zodiac1111.github.com/blog/2012/07/03/Fedora-17-x86_64-tftp</id>
    <content type="html"><![CDATA[<blockquote><p>http://www.oklinux.cn/html/network/ser/20090729/72351.html</p></blockquote>

<hr />

<p>f17下有些东西有所改变,网上一些教程略显陈旧.</p>

<h3>安装环境：Fedora</h3>

<p>1.安装xinetd<br/>
这是一个守护程序(?)</p>

<pre><code>yum install xinetd
</code></pre>

<p>2.安装tftp server(ftp服务器)</p>

<pre><code>yum install tftp tftp-server
</code></pre>

<p>3.更改tftp配置文件 <code>/etc/xinetd.d/tftp</code></p>

<!-- more -->


<p><code>vi /etc/xinetd.d/tftp</code>,打开tftp文件，设置tftp的跟目录，开启服务。（没有安装tftp-server之前，不存在tftp文件）</p>

<pre><code>service tftp
{
    socket_type = dgram
    protocol = udp
    wait = yes
    user = root
    server = /usr/sbin/in.tftpd
    #tftp服务器跟目录
    #-c 表示服务端可以创建(create)文件.
    #更多 man tftpd
    server_args = -c -s /home/gerry/tftpboot  
    #disable = yes 
    disable = no
    per_source = 11
    cps = 100 2
    flags = IPv4
}
</code></pre>

<p>在上述server_args设置tftp的工作目录<br/>
并且注释掉disable选项或者改成no使能tftp服务。</p>

<p>4.在<code>/home/gerry</code>下创建tftpboot目录，并且修改权限
```</p>

<pre><code>mkdir tftpboot
chmod 777 tftpboot/
</code></pre>

<p>```
5.启动tftp服务器</p>

<pre><code>service xinetd restart
</code></pre>

<p>现在已经被重定向,提示:<code>Redirecting to /bin/systemctl  restart xinetd.service</code><br/>
没什么影响,推荐按照重定向的命令执行来开启tftp服务<code>/bin/systemctl  restart xinetd.service</code></p>

<p>ps:selinux 和防火墙都可能(一定)使服务生效但无法访问!
粗暴但有效的解决办法 关闭syslinux 和防火墙</p>

<h4>selinux</h4>

<p>*临时关闭SELinux。如果你仅仅只是想临时关闭，可以输入</p>

<pre><code>setenforce 0
</code></pre>

<p>禁用SELinux。在 /etc  下可以看到一个SELinux文件夹，进入后，里面有个config文件，在终端进入到文件夹，输入</p>

<pre><code>vi config
</code></pre>

<p>更改其中的SELINUX项的值就可以关闭和启用SELinux服务了。
修改成  SELINUX=disable     禁用SeLinux
修改成  SELINUX=enforcing 使用SeLinux</p>

<h4>精准的防火墙设置</h4>

<blockquote><p>http://himme007.blog.163.com/blog/static/3466802520095742420660/</p></blockquote>

<p>修改<code>/etc/sysconfig/iptables</code>文件，添加以下内容：</p>

<pre><code>-A RH-Firewall-1-INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT  
</code></pre>

<p>各项参数含义暂时不甚了解,详情搜索iptables.</p>

<h1>参考文献</h1>

<p>tftpd设定<a href="http://std.sssh.tp.edu.tw/lesson/linux/tftp.htm">TFTP Trivial File Transfer Protocol</a><br/>
防火墙设置 http://himme007.blog.163.com/blog/static/3466802520095742420660/</p>
]]></content>
  </entry>
  
</feed>
